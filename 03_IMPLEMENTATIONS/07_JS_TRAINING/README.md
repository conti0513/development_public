# Modern JS Migration Guide (From ES5 to ES6+)

## æ¦‚è¦

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºé ˜åŸŸï¼ˆERPã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã€ãƒ¬ã‚¬ã‚·ãƒ¼ãªSaaSå®Ÿè¡ŒåŸºç›¤ãªã©ï¼‰ã§ä¾ç„¶ã¨ã—ã¦ä¸»æµã§ã‚ã‚‹ **ECMAScript 5 (ES5 / Rhinoã‚¨ãƒ³ã‚¸ãƒ³ç­‰)** ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã‚’ã€æœ€æ–°ã® **ES6+ (Node.js/GAS V8ç­‰)** ã¸å®‰å…¨ã«ç§»è¡Œãƒ»ä¿å®ˆã™ã‚‹ãŸã‚ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚

ã€Œãƒ¢ãƒ€ãƒ³ãªæ§‹æ–‡ã‚’ãŸã ä½¿ã†ã€ã®ã§ã¯ãªãã€**ã€Œå®Ÿè¡Œç’°å¢ƒã®åˆ¶ç´„ã‚’ç†è§£ã—ãŸä¸Šã§ã€ã„ã‹ã«å£Šã•ãšã€ä¿å®ˆæ€§ã®é«˜ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã‹ã€** ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã„ã¾ã™ã€‚

---

## âš¡ Quick Reference: ES5 vs Modern JS

ServiceNowãªã©ã®ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºç’°å¢ƒã§é­é‡ã™ã‚‹ã€Œãƒ¬ã‚¬ã‚·ãƒ¼ã®åˆ¶ç´„ã€ã¨ã€æœ€æ–°ã®æ›¸ãæ–¹ã®å¯¾æ¯”ã§ã™ã€‚

| ã‚«ãƒ†ã‚´ãƒª | Legacy (ES5 / Rhino) | Modern (ES6+ / V8) | ç§»è¡Œæ™‚ã®æ³¨æ„ç‚¹ |
| --- | --- | --- | --- |
| **å¤‰æ•°å®£è¨€** | `var` | `const` / `let` | ES5ã§ã¯ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚³ãƒ¼ãƒ—ãŒåŠ¹ã‹ãªã„ãŸã‚ `var` ã‚’ä½¿ç”¨ã€‚ |
| **é–¢æ•°** | `function name() {}` | `const name = () => {}` | ã‚¢ãƒ­ãƒ¼é–¢æ•°ã¯ES5ç’°å¢ƒã§ã¯æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã€‚ |
| **æ–‡å­—åˆ—** | `'A' + b + 'C'` | ``A${b}C`` | ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ãŒä½¿ãˆãªã„ç’°å¢ƒã§ã¯ `+` çµåˆãŒå¿…é ˆã€‚ |
| **éžåŒæœŸ** | Synchronous (Callback) | `async` / `await` | ES5ï¼ˆRhinoï¼‰ã¯åŒæœŸå®Ÿè¡Œã€‚Promiseã¯æœªå®Ÿè£…ã®å ´åˆãŒå¤šã„ã€‚ |
| **é…åˆ—æ“ä½œ** | `for (var i=0; ...)` | `forEach`, `map`, `filter` | é«˜éšŽé–¢æ•°ã¯å¤ã„ã‚¨ãƒ³ã‚¸ãƒ³ã§æœªã‚µãƒãƒ¼ãƒˆã®å ´åˆãŒã‚ã‚‹ã€‚ |

---

## ðŸŽ“ 40-Step Mastery Drill (ä¸€å•ä¸€ç­”ãƒŽãƒƒã‚¯)

ãƒ¬ã‚¬ã‚·ãƒ¼ç’°å¢ƒã§ã®é–‹ç™ºãƒ»ä¿å®ˆã«ãŠã„ã¦ã€ã€Œã•ã‚‰ã€ã§æ›¸ã‘ã‚‹ã¹ãå¿…é ˆãƒ‘ã‚¿ãƒ¼ãƒ³é›†ã§ã™ã€‚

### 1. Basic Foundations (åŸºç¤Ž)

1. **å¤‰æ•°ä»£å…¥**: `var x = 10;`
2. **æ–‡å­—åˆ—å®šç¾©**: `var s = 'Hello';`
3. **ç®—è¡“æ¼”ç®—**: `console.log(x + y);`
4. **é…åˆ—åˆæœŸåŒ–**: `var arr = [1, 2, 3];`
5. **è¦ç´ ã‚¢ã‚¯ã‚»ã‚¹**: `var first = arr[0];`
6. **æ¡ä»¶åˆ†å²**: `if (n >= 0) { ... }`
7. **åŽ³å¯†åˆ¤å®š**: `if (x === 5) { ... }`
8. **ã‚³ãƒ¡ãƒ³ãƒˆ**: `// Line comment`
9. **åŸºæœ¬ãƒ«ãƒ¼ãƒ—**: `for (var i = 0; i < 10; i++) { ... }`
10. **é–¢æ•°å®£è¨€**: `function test() { ... }`

### 2. Intermediate Operations (åˆç´šãƒ»å®Ÿå‹™)

11. **æ–‡å­—åˆ—çµåˆ**: `'Price: ' + val`
12. **ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå®šç¾©**: `var obj = { k: 'v' };`
13. **ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å‚ç…§**: `obj.key`
14. **é…åˆ—è¿½åŠ **: `arr.push('item');`
15. **é…åˆ—é•·å–å¾—**: `arr.length`
16. **æˆ»ã‚Šå€¤ã®ã‚ã‚‹é–¢æ•°**: `function f() { return x; }`
17. **åž‹å¤‰æ›(æ•°)**: `parseInt('10', 10);`
18. **å‰°ä½™ç®—**: `x % 2`
19. **è«–ç†ç©**: `if (a && b)`
20. **è«–ç†å’Œ**: `if (a || b)`

### 3. Advanced Scripting (ä¸­ç´šãƒ»ãƒ‡ãƒ¼ã‚¿å‡¦ç†)

21. **JSONãƒ‘ãƒ¼ã‚¹**: `JSON.parse(str);`
22. **JSONç›´åˆ—åŒ–**: `JSON.stringify(obj);`
23. **æ–‡å­—åˆ—æ¤œç´¢**: `str.indexOf('abc') !== -1`
24. **é…åˆ—åå¾©**: `for (var i = 0; i < arr.length; i++) { ... }`
25. **åž‹å¤‰æ›(æ–‡)**: `String(123);`
26. **æ—¥ä»˜ç”Ÿæˆ**: `var now = new Date();`
27. **ä¾‹å¤–å‡¦ç†**: `try { ... } catch (e) { ... }`
28. **ãƒˆãƒªãƒŸãƒ³ã‚°**: `str.trim();`
29. **ç½®æ›**: `str.replace('A', 'B');`
30. **è¦ç´ å‰Šé™¤**: `arr.splice(i, 1);`

### 4. Enterprise Standard (ä¸Šç´šãƒ»ä¿å®ˆ)

31. **Nullãƒã‚§ãƒƒã‚¯**: `if (val === null \|\| val === undefined)`
32. **æœªå®šç¾©åˆ¤å®š**: `if (typeof val === 'undefined')`
33. **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤**: `val = val \|\| 'default';`
34. **åˆ†å‰²**: `str.split(',');`
35. **ç¶™ç¶šåˆ¤å®š**: `while (condition) { ... }`
36. **æ•°å€¤åˆ¤å®š**: `isNaN(num)`
37. **çµåˆ(é…åˆ—)**: `arr.join(', ');`
38. **ä¸‰é …æ¼”ç®—å­**: `var res = ok ? 'Y' : 'N';`
39. **ãƒ¡ãƒ³ãƒåˆ—æŒ™**: `for (var key in obj) { ... }`
40. **å³æ™‚å®Ÿè¡Œé–¢æ•°**: `(function(){ ... })();`

---

## ðŸ› ï¸ Best Practices in Enterprise Environment

1. **Avoid `const/let**`: ES5ç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãŒæƒ³å®šã•ã‚Œã‚‹å ´åˆã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã‚’é¿ã‘ã‚‹ãŸã‚ `var` ã‚’ä½¿ç”¨ã™ã‚‹ã€‚
2. **Explicit Type Conversion**: `parseInt` ã§ã¯å¸¸ã«åŸºæ•°ï¼ˆ10é€²æ•°ãªã‚‰10ï¼‰ã‚’æŒ‡å®šã™ã‚‹ã€‚
3. **No Event Loop**: ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å®Ÿè¡Œç’°å¢ƒï¼ˆRhinoç­‰ï¼‰ã§ã¯ `setTimeout` ç­‰ã®éžåŒæœŸAPIãŒåˆ©ç”¨ä¸å¯ã§ã‚ã‚‹ã“ã¨ã«ç•™æ„ã™ã‚‹ã€‚

---
