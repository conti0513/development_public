/**
 * Mastery Drill: No.27 (try-catch / クラッシュ回避)
 * --------------------------------------------------
 * 【シナリオ】
 * 外部から届いたデータが「壊れている」ことを想定し、
 * プログラム全体が停止（クラッシュ）するのを未然に防げ。
 * --------------------------------------------------
 */

var dangerousData = "I am not JSON"; // 不正なデータ

try {
    // --- [挑戦する処理] ---
    var result = JSON.parse(dangerousData);
    console.log("パース成功:", result);

} catch (e) {
    // --- [失敗時のリカバリ] ---
    console.error("Q27 [Error]: パースに失敗しました。処理を継続します。");
    console.error("理由: " + e.message);

    // リカバリ処理（デフォルト値を設定するなど）
    var result = {}; 
} finally {
    // --- [成否に関わらず実行] ---
    console.log("Q27: 通信処理を終了しました。");
}

/**
 * 【ハックのポイント：精読時の眼力】
 * * 1. [エラーの握りつぶし]
 * catch (e) { } と中身が空のコードは、エラーを隠蔽する「最も気まずいバグ」の温床。
 * せめて log 一行でも出すのが現場の最低限のモラル。
 * * 2. [ピンポイント爆撃]
 * スクリプト全体を囲むのはNG。JSON.parse のような「失敗しやすい一行」に、
 * ピンポイントでかけるのが「どこが壊れたか」を特定しやすくするコツ。
 * ポイント：失敗時はログを吐くようにすること
 */