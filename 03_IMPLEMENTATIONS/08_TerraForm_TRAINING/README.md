# 🛡️ Terraform Mastery: VPS Operation & Safety (Top 10)

## 🏗️ 1. 構築と防御の基本

### Q01. Provider & Authentication (認証の隠蔽)
- **内容**: APIキーの管理。
- **鉄則**: 直書き厳禁。`TF_VAR_...` 等の環境変数を利用する。
- **JS連動**: Q42(身バレ防止)と同じく、機密情報をコードに残さない。

### Q02. Variable & Validation (ガード句)
- **内容**: 入力値の制限。
- **鉄則**: `validation` ブロックで変なプランを弾く。
- **JS連動**: Q11(ガード句)と同じく、不正データによるクラッシュを未然に防ぐ。

### Q03. Resource Definition (構造の定義)
- **内容**: インスタンスの宣言的定義。
- **鉄則**: 手動操作を排除し「コードが正解」の状態を作る。

### Q04. Lifecycle: prevent_destroy (最強の自衛)
- **内容**: 誤削除の物理的防止。
- **鉄則**: 重要資源には必須。`apply` 時の「うっかり破壊」をシステムで止める。

### Q05. Firewall / Security Group (最小権限)
- **内容**: 通信経路の制限。
- **鉄則**: SSHは特定IPのみ。JSのAPI通信(Q45)が通る最小の穴だけ開ける。

---

## 🔧 2. 保守と運用の極意

### Q06. Sensitive Data (ログの秘匿)
- **内容**: 出力の隠蔽。
- **鉄則**: `sensitive = true` でログへのパスワード流出を防ぐ。

### Q07. Plan: The Dry Run (Diffの儀式)
- **内容**: 実行前の差分確認。
- **鉄則**: `-/+` (再作成) はデータ消失の合図。JSのQ43(Diff)と同様、変化を凝視する。

### Q08. State Management (命のファイル)
- **内容**: 現在の状態の記録。
- **鉄則**: `tfstate` 紛失＝制御不能。手動復旧という絶望を避けるための最重要資産。

### Q09. Data Source / Import (既存資源の取り込み)
- **内容**: 「気まずいインフラ」の管理下への統合。
- **鉄則**: 手動で作られた既存環境を壊さずにTF化する、現場の知恵。

### Q10. Output & Integration (答え合わせ)
- **内容**: 構築結果の外部出力。
- **鉄則**: IPアドレス等を出力し、JSのQ41(テスト)の入力値として連携させる。
