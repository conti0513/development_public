name: AI Junior Engineer Worker
on:
  repository_dispatch:
    types: [ai-exec-command]
jobs:
  create-pr:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
      - name: Create AI Workspace Directory
        run: mkdir -p 00_AI_WORKSPACE/${{ github.event.client_payload.category }}
      - name: Write AI Content
        run: |
          cat <<'EOT' > 00_AI_WORKSPACE/${{ github.event.client_payload.category }}/${{ github.event.client_payload.filename }}
          ${{ github.event.client_payload.content }}
          EOT
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v6
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: "AI: Generated ${{ github.event.client_payload.category }} entry"
          title: "ðŸ¤– AI Entry: ${{ github.event.client_payload.filename }}"
          body: |
            ## ðŸ¤– AI Junior Engineer Report
            - **Category**: ${{ github.event.client_payload.category }}
            - **File**: 00_AI_WORKSPACE/${{ github.event.client_payload.category }}/${{ github.event.client_payload.filename }}
            CTO, I've drafted this entry. Please review and **Approve** to promote this to production!
          branch: "ai/draft-${{ github.event.client_payload.filename }}"
          labels: "ai-generated"
          delete-branch: true
