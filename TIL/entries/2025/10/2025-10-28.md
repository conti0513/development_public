# 🧠 TIL — 2025-10-28 (Layer 2: GCP Connection & Remote State)

## 🗓️ Summary

Today I continued in **SISU mode**, keeping quiet focus and stability.  
Main task: complete Layer 2 — moving Terraform state to **Google Cloud Storage (GCS)** and preparing for Cloud Run deployment.

---

## ✅ Achievements

| Step | Description |
|------|--------------|
| 1 | Duplicated Layer 1 folder → created `02_gcp_connect/` |
| 2 | Cleaned old state files (`rm -rf .terraform terraform.tfstate ...`) |
| 3 | Created GCS bucket for remote state via `gcloud` |
| 4 | Added `backend.tf` → migrated local state to GCS |
| 5 | Managed APIs via `services.tf` (`storage.googleapis.com`) |
| 6 | Created verification GCS bucket (`bucket.tf`) |
| 7 | Verified outputs and state location in GCS |

---

## 🔒 Security Notes

- Used **ADC (Application Default Credentials)** — no service account keys.  
- **No secrets** stored in repository.  
- `.gitignore` fully excludes sandbox, tfstate, and `.terraform/`.

---

## 🧭 Next Steps

- **Layer 3:** Deploy “Hello World” on **Cloud Run**.  
- Confirm successful state migration and module separation.  
- Begin preparing README for Udemy/Note documentation.

---

## 🌙 Reflection (SISU Mode)

Even with low energy, focus remained.  
Consistency > speed — today proved that quiet persistence keeps momentum.  
Tomorrow: build, test, and destroy Cloud Run to close Layer 3.

---

**Status:** Calm & steady progress 🌱  
**Duration:** ~30 min  
**Mode:** SISU (quiet build)



## 🧩 英語学習プラン（Fluency Focus）

### **Theme:** English Fluency and Systemic Practice

---

### 🎯 **Summary**

- 英語力全体は約80〜85%の完成度。  
- 残り20%は「反射神経的な運用力（fluency）」が不足。  
- 理論・文法よりも「瞬発的な会話練習」が必要。  
- 特に、**Listening・Speakingの反復訓練**が最優先課題。

---

### 🧠 **Insights**

1. 英語の理解・読解は問題ないが、即応性が低い。  
2. 弱点は語彙ではなく「反応スピード」。  
3. **AI会話練習（ChatGPT英会話）**が最も効果的。  
4. 中学生レベルの短文で「反射神経回路」を再構築する。  
5. *just*, *also*, *and* などの副詞・接続詞の自然な使用を強化。  
6. 英文法知識は十分。今後は出力の速度を上げる段階。

---

### 🔁 **Practice Plan**

| 時間帯 | 内容 | 補足 |
|--------|------|------|
| 朝 | タイピング英語練習（カフェ） | 静かな環境で反射訓練 |
| 夜 | 音声会話（AI or 公園で独り言） | 実戦形式で瞬発力強化 |
| 毎日 | 1トピック英語ディスカッション | ChatGPT英会話で記録 |

**Keywords:** implement / ensure / vulnerability / system / issue / network / IP address  
**Goal:** SC-900・SC-200に英語で合格し、2026年に海外PJ参画へ。

---

## 🪶 **Reflection**

- 知識は十分に蓄積済み。  
- これからは **Practice, not Study** の段階。  
- 英語力 × セキュリティ × クラウド の統合で次のキャリアへ。  

---
## mode : sis
_ キャッシュフローの健全化
ー　英語学習のヒントをメモに→ SC900に向けた準備





# 🧭 TIL：モード運用設計（2025-10-11）

## 背景
この1年間、プロジェクト稼働・体調・家庭などの外乱が頻発し、  
学習（TIL／SCシリーズ）との稼働バランスが大きく揺れた。  
特に「PJ稼働が上がるとTILが下がる」という逆相関が明確に見え、  
同じペースで走り続けるのは現実的ではないと判断した。  

そこで、外乱を前提とした3つのモード（Full／Standard／Sisu）を導入し、  
週単位でモードを選び、TIL・学習量・体調を再現可能な形で管理する仕組みを構築した。  
この設計は「止めない・盛らない・責めない」を前提にした運用モデルである。  

中でも **Sisuモード** はこの仕組みの中核を担う。  
月の半分がSisuとなる時期もあれば、数ヶ月続く場合もある。  
しかし、それは「停滞」ではなく「再生の前段階」である。  

Sisu（シス）はフィンランドに古くから伝わる哲学で、  
「厳しい冬を耐え抜く静かな勇気」「逆境の中で一歩を進める力」を意味する。  
北欧の人々はこの精神で長い冬を越え、再び春を迎える。  
このモード設計も同様に、Sisuを「耐えながらも前進する力」として捉え、  
一時的な停止や減速を、**再生と深化のプロセス**として位置づけている。  

---

## モード概要

| モード | 状況 | 目的 | 週KPI |
|:--|:--|:--|:--|
| **Full**（加速期） | PJ安定・体調良好・Mac可搬 | 学習と成果を最大化 | TIL 5回／学習120分 |
| **Standard**（維持期） | PJ稼働高め・体調安定 | 継続とバランス維持 | TIL 3回／学習60分 |
| **Sisu**（再生期） | 体調・PJ・家庭いずれかが重 | 外乱対応と内省・回復 | TIL 1回（メモ可）／学習30分（入力のみ） |

---

## 運用ルール
- **週ごとにモードを1つ選択**（月曜朝に宣言）  
- **1日3分だけTIL**（1行メモ or 明日の1タスク）  
- **Sisu発動条件**：Mac非携帯／体調×／PJ集中週  
- **72時間復帰プロトコル**  
  - Day1：メモ整理のみ  
  - Day2：5行清書  
  - Day3：短いTILを1本コミット → Standardへ復帰  

---

## マントラ：Sisuモードの行動マップ
----------------------------------------
領域	許されること	やめること
身体	休む・温める	無理に動く・我慢する
思考	1行書く	自責・反芻
行動	小さく続ける	一気に取り返す
感情	受け入れる	比較・焦り
環境	整理・縮小	拡張・詰め込み
💬 Sisu的マントラ（運用時の心の指針）

今は止まっているのではなく、根を張っている。

縮むことは、次に伸びるための設計。

焦らないことも、努力の一種。

Sisuとは、「静かな再生の戦略」である。
---

## 今日のモード
- **Mode:** Sisu（体調安定・PJ高負荷週のため軽量運用）



# ✅ 直近の業務内容
## サマリー
セキュリティ運用・クラウド移行・ネットワーク構築を横断的に経験し、監査対応まで含めた再現性のある基盤整備を推進。PC300台規模のEDR導入から、海外拠点立ち上げ、医療系の高セキュリティM365環境まで幅広く実績あり。効率化とトレーサビリティを両立する運用設計が強み。

## 1. セキュリティ運用・実装  
- **EDR・MDM・SaaS認証基盤の導入・実装経験**あり（マリオン・ESET導入支援、ログ取得設定）。  
- 直近PJでは、**約240台のPC、100台のiPadを対象に運用課題を抽出し、PJTへ改善提案**。  


2. **SaaS統合／ID管理**  
- **MFA・条件付きアクセスを含む実装経験あり**（過去PJでのM365導入支援）。  
- 現職では **SSO環境を部分的に運用しつつ、ライフサイクル管理の課題を整理して改善提案**。  
　- Google Workspace・M365・HENNGE でSSO設計・運用  
　- 対象ユーザー：約200名

3. **ネットワーク構築・運用（国内80拠点／海外1拠点）**  
　WAN/LAN 設計・QoS設定・安定稼働  
　- 海外拠点では、監査・セキュリティの観点を踏まえて構築  
　- **トレーサビリティ確保**: 現地PCにツールを配置し、リモートログイン環境を構築（ルーターログ管理を補完）  
　- **セキュリティ転送**: AWS SFTPマネージドサービスを利用し、シェルスクリプトで現地データを安全にクラウド転送  
　- **VLAN分離**: カメラ転送／データ転送を用途別にセグメント化し、セキュリティと安定性を担保  


4. **クラウド移行・IaC運用（監査対応のバックボーンあり）**  
　- 金融系オンプレ案件にて、JP1＋シェル／バッチを活用した監視・ジョブ管理を構築  
　- ITIL資格を取得し、監査要件（変更履歴・構成管理・品質保証）に準拠したシステムを設計  
　- 現在はAWS/GCPにてLinux＋シェルによるIaCを実践  
　　→ コード化による再現性、監査対応（トレーサビリティ）、UI依存排除を実現


5. **IoT／監視基盤導入**  
　人流カメラ・POS周辺の監視基盤を設計・導入  
　- 国内外：約80拠点
　- ベンダー共用シートを活用し、アドレス／シリアル番号を体系管理
　- 設置・交換履歴を即時トレース可能にし、監査対応や不具合解析の精度を向上
　- 個人依存（GAS等）を避け、組織的に維持可能な運用ルールを策定

6. **監査・統制対応**  
　上場準備企業における監査対応を推進
　- POS／PC（Windows・Mac）の棚卸し台帳を整備し、資産管理の透明性を確保
　- 世代管理を導入し、変更履歴を追跡可能にすることでトレーサビリティを担保
　- 指摘事項は都度是正し、直近では資産管理に関する監査指摘をゼロ化
　- 監査用資料の作成を担当し、監査人・CTOへの報告プロセスを支援

7. AI活用による生産性向上
　AIを日常業務に組み込み、処理効率を最大 2.5人分 に引き上げ
　- 半自動化: Slackスレッドに定型プロンプトを用意し、数字や案件名を打ち込むだけで支払い依頼ドラフトやTILを自動生成
　- 自動化: Backlogへのチケット起票や履歴更新をAIで下書きし、トレーサビリティを確保
　- 人間は最終確認だけを行う設計で、業務効率と信頼性を両立
　- 効率化の成果を人月換算で数値化し、投資対効果を説明可能

8. M365／コラボレーション基盤導入・運用
　SharePoint Online の開発・改修、Teams 運用最適化
　- 医療・製薬プロジェクトで利用される高セキュリティ環境を構築
　- DLP／バックアップを実装し、データ消失リスクを低減
　- 治験プロジェクト向けに、医師・製薬・営業のみアクセス可能な限定SharePointのサイトを設計・運用
　- コンプライアンス要件を満たす運用ルールを策定・運用

9.EDR／セキュリティ基盤導入
　ESET・Malion を活用したエンドポイントセキュリティ導入
　- PC／モバイル約340台を対象に展開し、統制レベルを標準化
　- アラート対応フローを整備し、運用チームの対応時間を短縮
　- ログ取得・レポーティングを実装し、監査対応の透明性を確保

10.グローバル展開のIT基盤支援
　台湾出展時にネットワーク設計～ローンチまで担当
　- 現地ベンダー調整・契約含む、海外拠点立ち上げをリード
　- VLAN分離やセキュリティ設計を実施し、海外拠点でも国内標準のセキュリティポリシーを維持
　- 短期プロジェクトで稼働安定化までを完了し、再現性ある展開モデルを確立
---

# ✅ 強み
## セキュリティ × クラウド
 - EDR/MDM/SaaS認証基盤（HENNGE, M365, GWS）
 - 監査対応／ゼロトラスト設計／クラウド移行（AWS/GCP, Terraform, Cloud Run）

## ネットワーク基盤
 - WAN/LAN設計・QoS・多拠点展開（国内80拠点／海外1拠点）
 - SIEM・監視系統合（CloudWatch, Slack転送, オンプレ→クラウド移行）

## AIフレンドリー
 - コーディングも可能（Python, Go, GAS, PowerShell）
 - PoCをAIを活用しながら短期間で回せる柔軟さ
---

# 📘 TIL - 2025-06: eBay Sales & Repair Focus Highlights

## ✅ Highlights

- Achieved **over $1,400 in sales** during June  
  → Across **14 orders** — a solid result for just the 2nd month since resuming
- Confirmed that **lens repairs** provide the best ROI among listed items
- Felt progress in **structuring workflows** for listing, shipping, and testing
- Reconfirmed eBay’s unique behavior:
  - Strong market response to markdown strategies
  - Visibility matters more than product perfection

## 🧠 Key Learnings

- **Build from what sells** — lenses are a sustainable entry point
- eBay rewards **activity and pricing dynamics**, not just quality
- Structuring operations reduces overwhelm, even with limited time

## 🧩 Challenges

- Takes significant **time and energy**
- Gets harder when **IT workload spikes** (main job interference)
- **Return risk** still exists and cannot be ignored

## 💬 Reflection

> Not bad at all for Month 2.  
> Sales give confidence, but structure gives endurance.  
> Keep it lean, focused, and data-informed.



# 📘 TIL - 2025-05 Security Engineer’s Highlight

### 🐳 Deployment Method Comparison

#### 🖥️ Option 1: Cloud Shell Deployment

```
[Cloud Shell]
     |
     | gcloud run deploy --source .
     v
[Cloud Run (Auto Build + Deploy)]
     |
     v
[Live Service]
```

* ✅ Fast, simple for quick testing
* ⚠️ Authentication errors or CLI config issues may occur

---

#### 🐳 Option 2: Docker + Artifact Registry

```
[Local or Codespaces]
     |
     | docker build
     | docker push
     v
[Artifact Registry (Image Storage)]
     |
     | gcloud run deploy --image
     v
[Cloud Run (Deploy from Image)]
     |
     v
[Live Service]
```

* ✅ High reproducibility
* ✅ Ideal for team and CI/CD integration
* ⚠️ Requires container/image management

---

### ✅ Use Case Summary

| Use Case                  | Best Fit                            |
| ------------------------- | ----------------------------------- |
| Quick testing             | Cloud Shell (direct deploy)         |
| Stable production / CI/CD | Docker → Artifact Registry pipeline |

---

### 🔁 CI/CD Pipeline Overview

```
[GitHub]
   ↑




   
   | ① Push to main branch
   |
[GitHub Actions]
   |
   | ② docker build
   | ③ docker push to Artifact Registry
   |
[Artifact Registry]
   |
   | ④ Deploy image to Cloud Run
   v
[Cloud Run]
   |
   v
[Production]
```

| Step | Description                              |
| ---- | ---------------------------------------- |
| ①    | Code push triggers automation            |
| ②    | Docker image built via GitHub Actions    |
| ③    | Image pushed to Google Artifact Registry |
| ④    | Cloud Run deployment from image          |

---

### 🧠 Why This Matters

* **Push = Deploy** enables full automation
* Docker ensures **consistent, testable environments**
* Cloud-native design keeps **costs low and scalability high**

---


固定固定固定


### ✅ What I Designed

#### 🛠️ **eBay Micro-Business Automation Blueprint**

Built a scalable architecture for **semi-automated eBay operations**, balancing manual skill (repair) with automation (listing, logging, analysis):

---

### 🔹 System Architecture Overview

| Component               | Tool/Platform                        | Role                                   |
| ----------------------- | ------------------------------------ | -------------------------------------- |
| 📊 Product DB           | **Google Spreadsheet**               | Central UI / DB                        |
| 🧠 Business Logic       | **Google Apps Script (GAS)**         | Detect status updates, trigger listing |
| 🛒 Listing Integration  | **eBay API (OAuth)**                 | Post items via `AddFixedPriceItem`     |
| 🔁 Job Offloading       | **Cloud Functions / GitHub Actions** | Optional for scale                     |
| 🖼️ Image Management    | **Drive API → eBay PictureDetails**  | Auto-fetch & assign product images     |
| 📣 Notifications        | **Slack Webhook**                    | Success/failure alerts                 |
| 📈 Analytics (optional) | **Spreadsheets / BigQuery**          | ROI, turnover, re-list trigger         |

---

### 🧩 Workflow Summary

1. 📥 Admin inputs product info to Spreadsheet (manual or via import)
2. 🛠️ After marking "Repaired ✅", GAS detects update
3. 🛒 GAS sends listing payload to eBay via API
4. 🖼️ Images fetched from Drive → uploaded to eBay
5. 📣 Logs posted to Slack or saved in spreadsheet
6. 🔄 On sale or timeout, item auto-relisted or archived

---

### 💬 Reflections

* ✍️ Only touch "Spreadsheets & Screwdrivers" — everything else flows
* 🧠 Structure beats repetition: **engineer once, profit often**
* 🎯 Ideal for small-scale commerce + solo operations (like “Last Wheel Village”)

---

### 🪪 Identity Tagline (Post-Oct)

> **"I design micro-business pipelines for secondhand e-commerce — structured, scalable, semi-automated."**

---
### 📦 eBayマイクロビジネス自動化構成（AA図）

```
             +----------------------+
             |  Google Spreadsheet  |
             | (商品・状態など入力) |
             +----------+-----------+
                        |
                        v
         +-----------------------------+
         |   Google Apps Script (GAS)  |
         | ・修理済みを検知              |
         | ・eBay API呼び出し           |
         | ・Slack通知 or ログ保存      |
         +-----------------------------+
                        |
       +----------------+------------------+
       |                                   |
       v                                   v
+------------------+              +----------------------+
|     eBay API     |              |   Slack / スプレッドシート |
| 商品出品・更新    |              |    成功/失敗ログ出力      |
+------------------+              +----------------------+

       ^
       |
       |   ※画像が必要な場合
       |
+--------------------+
| Google Drive       |
| (画像保管・取得)   |
+--------------------+
       |
       v
+----------------------+
| eBay PictureDetails  |
| 画像アップロード     |
+----------------------+
```

---

### 🚀 拡張構成（CI/CD導入時）

```
[GitHub]
   |
   v
[GitHub Actions] ——→ docker build/push
   |
   v
[Cloud Functions or Cloud Run]
   |
   v
[eBay APIへの非同期処理]
```

---
### ✅ 目的：eBay業務のUI化

「仕入れ～修理～出品」までをGCP内で完結。
日々触るのは**シンプルなWEB UI**だけにする。

---

### 🧱 技術スタック構成（フロント～デプロイ）

| レイヤー      | 選択肢例                                             | 備考                               |
| --------- | ------------------------------------------------ | -------------------------------- |
| UIフロント    | **React / Next.js / Vue.js**                     | 慣れてるものでOK。Next.jsならAPI連携も楽。      |
| ホスティング    | **Cloud Run + Docker** or **Cloud Storage (静的)** | Cloud Runならサーバーあり、Storageなら超低コスト |
| バックエンドAPI | Cloud Functions / Cloud Run                      | GAS連携も可（認証まわりに注意）                |
| DB        | **Spreadsheet / Firestore / Cloud SQL**          | 最初はSpreadsheetでも十分構造化可能          |

---

### 💻 UIイメージ（例）

* 商品一覧：修理ステータス、写真、仕入れ原価、販売予定額
* チェックボックスで出品指示 → ボタン押下でeBay API発火
* ステータスはログから自動取得（成功/失敗）

---

### 🔁 GCP内フロー（構成イメージ）

```
[User (Web UI)]
     |
     v
[Cloud Run (UI API)] ← React etc.
     |
     v
[Cloud Function / GAS / eBay API]
     |
     v
[Google Sheet / Firestore / Slack]
```

---

### ✅ メリット

* GCP内で**全データ・処理を一元管理**
* CI/CDで**自動デプロイ（GitHub Actions + Cloud Run）**
* GASとも接続できるので**スプレッドシートとの橋渡しも可能**

---




# 📘 TIL - 2025-04 Security Engineer’s Highlight

## ✅ Highlight of the Month

🧠 **CompTIA Security+ 全体構成の要点整理を開始**
体系的なセキュリティ知識をアウトプットベースでまとめ始め、**現場実装の裏付けとなる設計思考を強化中**。

> Initiated structured markdown summaries for Security+ (SY0-701), organized by topic and enriched with real-world reflection.
> Goal: align theoretical frameworks with hands-on architectures from prior work (e.g., GCP, monitoring, alert design).

---

## 🗂️ Output Directory (Markdown Format)

```bash
/workspaces/development_public/comptia/
├── 01.x.md  # Threats, Vulnerabilities, Attacks
├── 02.x.md  # Security Architecture & Design
├── 03.x.md  # Secure Networking Concepts
├── README.md  # Global index + cross-links
```

* 合計15ファイル以上、各トピックを約1,000〜8,000字で要約・再構成
* Markdownで段階的に展開可能なため、TILやブログへの転用が容易
* 各ファイルに **現場での適用可能性・ログとのつなぎ込み視点** を追記

---

## 📌 意識していること

* セキュリティ資格を\*\*「知識の証明」ではなく「設計の言語化補助ツール」\*\*と捉える
* 資格対策のインプットではなく、**TILリポジトリとの相互リンクで再現性あるナレッジに変換**
* 実装・構成に裏打ちされた言語を整えることが、**便利屋ではない価値の見せ方になる**

---

## 🔁 Next Steps

* セクション04（Identity & Authentication）以降のドキュメントを5月中に完了予定
* TIL内の `glossary.md` を `comptia/README.md` に連動させる構想中
* 過去のCloud構成やSlack通知設計とリンクする「応用例ページ」も検討

---

## 🏷️ Tags

* [x] CompTIA Security+
* [x] Markdown-based Knowledge Base
* [x] Threat Modeling
* [x] Secure Design Principles
* [x] Security Architecture Language
* [x] Documentation as Output
---


# 📘 TIL - 2025-03 Security Engineer’s Highlight

## ✅ Highlight of the Month

🚀 **Secure FTPS Transfer API over Cloud Run with Static IP Architecture**
Cloud Run × FTPS × VPC Networking を活用した、再現性とセキュリティを両立する**クラウドファイル転送基盤**を構築。

> Designed and implemented a stateless, serverless file transfer pipeline using Cloud Run and FTPS (Passive mode), with static IP support via VPC Connector + Cloud NAT.

---

## 🔐 Security Architecture Overview

```
[GCS] ──(trigger)──> [Cloud Run API]
                           │
                 (Static IP via NAT + VPC Connector)
                           │
                 ──> [FTPS Server on GCE]
```

* **Encrypted File Transfer**: FTPS (TLS) ensures in-transit confidentiality.
* **Static Egress IP**: Enables access to legacy servers with IP whitelisting.
* **Passive Mode Configuration**: Port 21 + range 50000–55000 opened explicitly.
* **Least Privilege Scope**: Access limited to specific GCS buckets and FTPS target only.

---

## 🧩 Modular Breakdown

| Module              | Purpose                    | Security Role                         |
| ------------------- | -------------------------- | ------------------------------------- |
| `A_cloudrun-api/`   | GCS-triggered upload logic | Stateless transfer handler            |
| `B_ftps-server/`    | FTPS with TLS on GCE       | Secure endpoint with logging          |
| `C_vpc-networking/` | VPC Connector + NAT        | Egress IP control, isolation enforced |

---

## 🧠 Security-Centric Learnings

* 🔐 **Cloud Run integration with external FTPS requires static IP control** due to whitelist constraints.
* 🧱 **Passive FTPS mode** introduces complex NAT traversal and firewall design requirements.
* 🧪 Logging and modularization support **traceability and audit-readiness**.
* ⚖️ Entire setup was scripted via **shell and JSON**, no Terraform used—ideal for small, controlled deployments or POC.

---

## 📁 Operational Validation Log

```bash
✅ GCS trigger: file uploaded
✅ Cloud Run fired: function started
✅ FTPS succeeded: secure upload confirmed

Transferred:
upload_test_20250323050140.txt → /home/your_username/...
```

---

## 🧭 Reflection as a Security Engineer

* 各コンポーネントの役割を明確に分離（トリガー／通信／固定IP管理）し、**再利用・監査対応・障害切り分け**に強い設計を実現。
* **実装視点に偏りがちなFTPS通信を、構成設計と通信制御の観点で再評価**。
* コードの一貫性、モジュール化、ドキュメント整備により、**他プロジェクトへの転用性と共有可能性**も確保。

---

## 🔁 Next Steps

* `detection_scenarios/` に「外部FTPS連携」用の検知ルールを記述
* Cloud NAT構成を Terraform 版でも再現予定
* 構成図およびREADMEをセキュリティ視点でリファクタリング
* Slack通知時に転送検知ログを付加するための署名付きWebhookを設計中

---

## 🏷️ Tags

* [x] FTPS / TLS
* [x] Cloud Run × Static IP
* [x] Passive Mode Configuration
* [x] Audit-Ready Architecture
* [x] GCP / Cloud Networking
* [x] Detection Logic Design
* [x] Shell-Based Infra Automation

---



## ✅ 3月の最大成果 / Highlight of the Week

🚀 **Cloud Run + FTPS を連携した「サーバーレス・ファイル転送 API」構築に成功！**  
Built a fully automated FTPS transfer API using Cloud Run, supporting static IP and GCS triggers.

---

## 🔧 構成とモジュール / Architecture & Modules

```
serverless-ftps-api-public/
├── A_cloudrun-api/      # Cloud Run API + GCS trigger
├── B_ftps-server/       # FTPS server on GCE
└── C_vpc-networking/    # VPC Connector + NAT for static IP
```

- GCS にファイルをアップロードすると Cloud Run が起動し、FTPS に転送される  
- Static IP を Cloud NAT + VPC Connector で実現  
- FTPS は Passive モードで、Firewall やポートレンジも調整済み

---

## 🏗️ システム構成図 / System Diagram

```
[GCS] ──> [Cloud Run API] ──> [FTPS Server (GCE)]
               │
      (Static IP via VPC Connector + NAT)
```

---

## 🧪 実行ログ / Execution Log

```bash
$ bash 03_test_cloud_run.sh

✅ ファイルアップロード完了 / File uploaded  
✅ Cloud Run 発火確認 / Triggered  
✅ FTPS サーバーに転送成功 / File transfer succeeded

Transfer completed:
upload_test_20250323050140.txt -> /home/your_username/upload_test_20250323050140.txt
```

---

## 🧠 学び・気づき / Learnings & Takeaways

- Cloud Run で外部 FTPS に接続するには固定IP構成が必須  
  → Static IP configuration is required for Cloud Run to access external FTPS  
- VPC Connector + Cloud NAT を組み合わせて構成  
  → Combining VPC Connector and Cloud NAT works well  
- FTPS は Passive モード利用時に Firewall と NAT の設計が鍵  
  → Passive mode FTPS requires careful port and firewall design  
- Terraform を使わなくても、シェルと JSON で再現できた  
  → Infra setup was reproducible with shell + JSON, no Terraform needed

---

## 📌 その他進捗 / Other Progress

- CloudShell から zip 化して Codespaces に転送・展開完了  
  → Zipped files and moved to Codespaces successfully  
- `.gitignore` を使って段階的にコード公開準備中  
  → Using .gitignore to control staged releases  
- GCP コスト最小化のため検証環境のみ構築  
  → Setup done on a test-only basis to minimize GCP billing

---