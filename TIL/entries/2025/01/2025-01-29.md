# Today I Learned

## 2025-01-29

## Symbol
# Finished
% Unfinished
$ Updates Notes

# Today I Learned

## Today's Learnings
  # IT Admin
  /workspaces/development_public/tutorials/IT Administrator/Windows Support/Windows11_Automated_Setup_Guide

  # DET preparation
  /workspaces/development_public/tutorials/IT Administrator/English/DET

  # TOEIC preparation

## Detail

### THM Course
# Computer Science Basics / Pre Security
  # Introduciont to Cyber Security
  # Network Fundamentals
  # How The Web Works
  # Linux Fundamentals
  # Windows Fundamentals
  # Network Fundamentals


  Cyber Security Foundations / Cyber Security 101
    https://tryhackme.com/r/path/outline/cybersecurity101

  # Section 1 Start Your Cyber Security Journey
    # TryWinMe: Think Cyber Monopoly
    # Offensive Security Intro
    # Defensive Security Intro
    # SerchSkiils

  # Section 2 Linux Fundamentals
        # 1
        # 2
        # 3

  # Section 3 Windows Fundamentals
        # 1
        # 2
        # 3
        # Active Directory Basics

    Section 4 Command Line
        # Windows Command Line
        Windows PowerShell
          # introduction
          # what is powershell
    
    Section 5 
    Section 6
    Section 7
    Section 8
    Section 9
    Section 10
    Section 11
    Section 12
    Section 13


### How to connect thm
- split view
- Deploying Your Linux Machine:push "Start Machine"
- Get the IP address of Linux Machine
- Open the terminal and use command
  ssh tryhackme@IP.Address
  yes
  tryhackme
  tryhackme
---



### Words and Phrases
reworked(the reworked "Linux Fundamentals" series.):
ditch(we'll be ditching the in-browser functionalit):
flags(using flags and arguments):
arguments(using flags and arguments):
Although intimidating,:
whilist(Whilst Operating System vendors will maintain their own repositories,) :
So, to start,(So, to start, we need to add the GPG key for the developers of Sublime Text 3.):



### Corp IT

#### 改善案
/workspaces/development_public/tutorials/IT Administrator/CorpIT/改善案.txt

#### 警報転送ツール
/workspaces/development_public/tutorials/IT Administrator/CorpIT/monitoring.txt

#### キッティング
/workspaces/development_public/tutorials/IT Administrator/Windows Support/Windows11_Automated_Setup_Guide

#### 法令遵守・ガバナンス（内部統制）
/workspaces/development_public/tutorials/IT Administrator/CorpIT/法令遵守・ガバナンス.txt

#### Mac (OpenUrls)
/workspaces/development_public/tutorials/IT Administrator/Mac Support/openUrls

### GAS/店舗データ集計
tutorials/gas/店舗データ集計ツールDIR
---

## DET preparation
/workspaces/development_public/tutorials/IT Administrator/English/DET

## TOEIC preparation
- 銀のフレーズ
- 公式問題集

### 時間割
<平日>
15分　朝電車：銀のフレーズ
30分　朝カフェ：公式問題集
15分　帰り電車：銀のフレーズ

＜週末＞
120分　TOEIC問題集

### 進め方
＜銀フレ（とりあえず）＞
・1周目　1秒以内に英語→日本語：正解になるまで繰り返す
　　　　　※わからなかった単語はMy単語帳に追加して覚える
　　　　　※フレーズを活用して覚える（音読もする）

・2周目　1秒以内に日本語→英語：正解になるまで繰り返す
　　　　　※わからなかった単語はMy単語帳に追加して覚える
　　　　　※フレーズを活用して覚える（音読もする）

・3周目　総復習
・4周目　口に馴染むまで音読
・5周目　SWで発音をする

＜問題集＞
・1周目　正解するまで
・2周目　解説を読む
・3周目　総復習
・4周目　口に馴染むまで音読
・5周目　全知識を運用できるように音読
---

### **Prepositions（前置詞）**
### **Conjunctions（接続詞）**
### **Conjunctive Adverbs（接続副詞）**

## DaaS検討

**DaaS導入に関する検討事項**

**1. DaaSのメリットとデメリット**

- **メリット（Pros）**:
  1. **コスト削減**: 高価なPCの購入やメンテナンスが不要になり、初期投資を抑制できます。
  2. **柔軟なリモートアクセス**: インターネット接続があれば、どこからでも業務環境にアクセス可能です。
  3. **セキュリティ強化**: データはクラウド上に保存されるため、デバイスの紛失や盗難時の情報漏洩リスクが低減します。
  4. **スケーラビリティ**: 必要に応じてユーザー数やリソースを柔軟に増減できます。
  5. **管理の一元化**: ソフトウェアの更新やパッチ適用を集中管理でき、運用効率が向上します。

- **デメリット（Cons）**:
  1. **ネットワーク依存**: 安定したインターネット接続が必須であり、接続不良時には業務に支障をきたす可能性があります。
  2. **初期設定の複雑さ**: 導入時の設定や既存システムとの統合に専門知識が必要です。
  3. **ランニングコスト**: 月額費用が発生し、長期的にはコストが蓄積する可能性があります。
  4. **カスタマイズ制限**: プロバイダーの提供する環境に依存するため、特定のカスタマイズが制限される場合があります。
  5. **データ主権の問題**: データが海外のサーバーに保存される場合、法的なデータ保護規制に注意が必要です。

**2. DaaSの提供ベンダー**

- **AWS（Amazon Web Services）**: Amazon WorkSpacesを提供しています。
- **GCP（Google Cloud Platform）**: Google Cloud VMware Engineを利用してDaaS環境を構築可能です。
- **その他のベンダー**: Citrix Virtual Apps and Desktops、VMware Horizon Cloudなどがあります。

**3. MacのDaaS提供状況**

- **AWS**: Amazon WorkSpacesは主にWindowsとLinuxの仮想デスクトップを提供しており、MacのDaaSは提供していません。
- **GCP**: GCPも直接的なMacのDaaSサービスは提供していません。
- **MacのDaaS提供ベンダー**: MacStadium、MacinCloudなどの専門ベンダーがMacのDaaSサービスを提供しています。

**4. AWSでのMacインスタンス利用料金**

AWSでは、macOSを実行する専用ホスト（Macインスタンス）を提供しています。料金は以下のとおりです（2025年1月時点）：

- **料金**: 1時間あたり1.083ドル（専用ホスト料金）
- **月額試算**: 月200時間利用の場合、約216.6ドル（約25,000円）

**5. DaaS導入に向けたアクションプラン**

- **ステップ1: 要件定義**
  - 導入目的の明確化（例：リモートワーク推進、コスト削減）
  - 対象ユーザーの選定（例：30人の特定部署）
  - 必要なアプリケーションやリソースの洗い出し

- **ステップ2: プロバイダー選定**
  - AWS、GCP、その他ベンダーの比較検討
  - 提供サービス、料金、サポート体制の評価

- **ステップ3: セキュリティと資産管理の設計**
  - EDM（Endpoint Detection and Response）の導入検討
  - 資産管理ソフトの必要性評価
  - VPNの設定と管理方法の決定

- **ステップ4: パイロット導入**
  - 小規模なテスト環境の構築（例：5ユーザー）
  - ユーザビリティやパフォーマンスの評価
  - フィードバックの収集と改善

- **ステップ5: 全社展開**
  - 全対象ユーザーへの展開計画策定
  - ユーザー教育とサポート体制の整備
  - 運用・保守体制の確立

**6. AWSとGCPを利用したDaaS構成例**

- **AWSの場合**:
  - Amazon WorkSpacesを利用して仮想デスクトップを提供
  - AWS Directory Serviceでユーザー管理
  - Amazon VPCとVPNを組み合わせてセキュアな接続を確保


# 社内にテストネットワークを構築する場合の設定例
## 要件
・ルーターA（社内メインルーター）：設定変更不可
・ルーターB（テスト用ルーター）：自由な設定が可能
・ルーターBの配下にテストデバイス（PCやWi-Fiアンテナ）を設置
・ルーターB配下のデバイスからインターネット接続を行う

## 構成例

インターネット
     |
[ ルーターA ]
(WAN: グローバルIP)
(LAN: 192.168.1.1/24)
     |
[ EWAN - ルーターB ]
(WAN: DHCP, 192.168.1.100/24)
     |
----------------------------------------
|              |             |          |
LAN1          LAN2          LAN3       LAN4 (管理用)
172.16.10.1   172.16.20.1   172.16.30.1 192.168.2.1
 (NATあり)     (NATあり)      (NATあり)    (NATなし)
  DHCP         DHCP          DHCP        DHCP
  範囲:        範囲:         範囲:       範囲:
  172.16.10.x  172.16.20.x   172.16.30.x 192.168.2.x
  |             |             |           |
[PC1]         [PC2]         [PC3]       [管理PC]

以下に**EWANでDHCPリトライ設定を含む修正版コンフィグ**を示します。DHCPリトライ設定は、DHCP取得失敗時にリトライ間隔と回数を制御します。

---

### **EWAN設定（DHCPリトライ含む）**

```plaintext
interface EWAN
ip dhcp client enable
ip dhcp client retry 5 interval 30
ip nat outside
no shutdown
```

---

### **追加された設定の詳細**

1. **`ip dhcp client retry 5 interval 30`**:
   - **リトライ回数**: DHCP取得が失敗した場合に最大5回リトライ。
   - **リトライ間隔**: 各リトライの間隔は30秒。

---

### **修正版コンフィグ全体**
※構文は適宜読み替える

```plaintext
# EWAN設定（DHCPリトライ含む）
interface EWAN
ip dhcp client enable
ip dhcp client retry 5 interval 30
ip nat outside
no shutdown

DHCPで取得したゲートウェイが設定されているか確認するには、
ルーターのルーティングテーブル（show ip route）を確認

デフォルトルート (0.0.0.0/0) が存在すれば設定不要です。
存在しない場合は、手動でデフォルトルートを追加
ip route 0.0.0.0 0.0.0.0 EWAN
# または（上位ルーターのIPを直接指定する場合）
# ip route 0.0.0.0 0.0.0.0 192.168.1.1

# LAN設定（LAN1～LAN4）
interface LAN1
ip address 172.16.10.1/24
ip nat inside
dhcp server enable
dhcp address 172.16.10.2 172.16.10.254
dhcp option dns 8.8.8.8 8.8.4.4
no shutdown

interface LAN2
ip address 172.16.20.1/24
ip nat inside
dhcp server enable
dhcp address 172.16.20.2 172.16.20.254
dhcp option dns 8.8.8.8 8.8.4.4
no shutdown

interface LAN3
ip address 172.16.30.1/24
ip nat inside
dhcp server enable
dhcp address 172.16.30.2 172.16.30.254
dhcp option dns 8.8.8.8 8.8.4.4
no shutdown

interface LAN4
ip address 192.168.2.1/24
no ip nat inside
dhcp server enable
dhcp address 192.168.2.2 192.168.2.254
dhcp option dns 8.8.8.8 8.8.4.4
no shutdown

# NAT設定

ip routing

ip nat inside source list 102 interface EWAN overload
access-list 102 deny ip 172.16.10.0 0.0.0.255 172.16.30.0 0.0.0.255
access-list 102 deny ip 172.16.20.0 0.0.0.255 172.16.30.0 0.0.0.255
access-list 102 permit ip 172.16.10.0 0.0.0.255 any
access-list 102 permit ip 172.16.20.0 0.0.0.255 any
access-list 102 permit ip 172.16.30.0 0.0.0.255 any

---
### デバッグの論点
### **LAN1からインターネット接続できない場合のデバッグ論点**

以下の手順で問題の原因を特定し、トラブルシューティングを行います。

---

### **1. 基本的な接続確認**

#### **1-1. LAN1デバイスからルーターBへの接続確認**
- **コマンド**（LAN1のPCから実行）:
  ```plaintext
  ping 172.16.10.1
  ```
- **期待される結果**:
  - 応答が返ってくればLAN1デバイスとルーターBのLAN1インターフェース間の通信は正常。
- **問題発生時の対応**:
  - ルーターBのLAN1設定を確認（`interface LAN1` が `no shutdown` になっているか）。

---

#### **1-2. ルーターBからWAN側の疎通確認**
- **コマンド**（ルーターBで実行）:
  ```plaintext
  ping 8.8.8.8
  ```
- **期待される結果**:
  - 応答が返ってくれば、WAN側のインターネット接続が正常。
- **問題発生時の対応**:
  - WAN（EWAN）の設定を確認:
    - `ip dhcp client enable` でIPアドレスを取得できているか。
    - `show ip route` でデフォルトルート（`0.0.0.0/0`）が設定されているか。

---

### **2. NATの確認**

#### **2-1. NAT設定の確認**
- **コマンド**（ルーターBで実行）:
  ```plaintext
  show ip nat translations
  ```
- **期待される結果**:
  - LAN1のデバイスからインターネット通信を試みた際に、NATテーブルにエントリが生成される。
- **問題発生時の対応**:
  - NAT設定を確認:
    - `ip nat inside source list 102 interface EWAN overload` が設定されているか。
    - `access-list 102` でLAN1のサブネット（`172.16.10.0/24`）が正しく許可されているか。

#### **2-2. NATの動作テスト**
- **コマンド**（ルーターBで実行）:
  ```plaintext
  debug ip nat
  ```
- **期待される結果**:
  - LAN1デバイスがインターネットにアクセスする際にNAT変換が行われているログが出力される。
- **問題発生時の対応**:
  - NAT設定が正しく動作していない場合、設定を再確認。

---

### **3. ルーティングの確認**

#### **3-1. デフォルトルートの確認**
- **コマンド**（ルーターBで実行）:
  ```plaintext
  show ip route
  ```
- **期待される結果**:
  - ルーティングテーブルに以下のようなデフォルトルートが含まれている：
    ```plaintext
    0.0.0.0/0 via <WANインターフェース or 上位ルーターIP>
    ```
- **問題発生時の対応**:
  - デフォルトルートが設定されていない場合は以下を追加:
    ```plaintext
    ip route 0.0.0.0 0.0.0.0 EWAN
    ```
    または:
    ```plaintext
    ip route 0.0.0.0 0.0.0.0 192.168.1.1
    ```

#### **3-2. LAN間のルーティング確認**
- **コマンド**（ルーターBで実行）:
  ```plaintext
  traceroute 8.8.8.8 source 172.16.10.1
  ```
- **期待される結果**:
  - WAN側のIPアドレス（EWAN）を経由するトレース結果が表示される。
- **問題発生時の対応**:
  - ルーティングテーブルを確認し、LAN1からのトラフィックが正しい経路をたどっているか検証。

---

### **4. ACL（アクセスリスト）の確認**

#### **4-1. ACLの適用状況確認**
- **コマンド**（ルーターBで実行）:
  ```plaintext
  show access-lists
  ```
- **期待される結果**:
  - ACL 102でLAN1のサブネットがインターネット通信を許可されている。
- **問題発生時の対応**:
  - ACL設定に誤りがある場合、設定を修正:
    ```plaintext
    access-list 102 permit ip 172.16.10.0 0.0.0.255 any
    ```

---

### **5. DNSの確認**

#### **5-1. DNS動作確認**
- **コマンド**（LAN1のデバイスで実行）:
  ```plaintext
  nslookup www.google.com
  ```
- **期待される結果**:
  - 正しいIPアドレス（GoogleのIP）が返される。
- **問題発生時の対応**:
  - DNS設定を確認（LAN1のDHCPでDNSサーバーが正しく配布されているか）:
    ```plaintext
    dhcp option dns 8.8.8.8 8.8.4.4
    ```

---

### **6. ログの確認**

#### **6-1. 全般的なログ確認**
- **コマンド**（ルーターBで実行）:
  ```plaintext
  show logging
  ```
- **期待される結果**:
  - DHCP失敗、NATエラー、ルート不一致などの問題に関する情報が確認可能。

---

### **まとめ**
1. **LAN1デバイスからルーターBへの通信確認**。
2. **WAN側の疎通確認（Ping、NAT変換、ルート確認）**。
3. **ACLとNAT設定が正しいか検証**。
4. **DNS設定が適切か確認**。
